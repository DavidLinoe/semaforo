
<html><head><title>Painel Dsin</title><style>@import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');body {font-family: Arial, sans-serif;margin: 0;padding: 0;display: flex;justify-content: start;align-items: center;flex-direction: column;height: 100%;background-repeat: repeat-y;background-size: cover;background-position: center;filter: brightness();background-image: url('https://images2.imgbox.com/5d/42/SRBIA0NV_o.png'), url('https://images2.imgbox.com/d7/8a/FkB3pmGx_o.jpeg')}.header {display: flex;justify-content: space-between;align-items: center;width: 100%;height: 130px;position: absolute;background: #3C4448;box-shadow: rgba(0, 0, 0, .45)0px 10px 15px}.logo {margin: 20px;background-image: url("https://images2.imgbox.com/f7/e0/UmyYPql1_o.png");background-repeat: no-repeat;position: relative;top: 25px;width: 220px;height: 100px}.home {margin: 20px;background-image: url("https://images2.imgbox.com/eb/b6/aBLDP1ly_o.png");background-repeat: no-repeat;width: 305px;height: 130px;position: relative;right: 0px;}.footer { position: relative; bottom: 0; height: 300px; width: 100%; background-color: #1b1b118e; display: flex; justify-content: center; align-items: center}.profile {width: 170px;height: 220px;background-image: url(https://images2.imgbox.com/d2/07/tYDk138u_o.png);color: azure;background-repeat: no-repeat;display: flex;justify-content: center;align-items: end;padding: 20px;background-position: center;}.content {margin-top: 140px;display: flex;justify-content: center;align-items: center;width: 100%;height: 300%;flex-direction: column;}.section {background-color: #3d3d3da8;width: 80%;border-radius: 10px;height: auto;text-align: center;margin: 10px;}img {border-radius: 15px;width: 30vw;height: 30vh;}h1 {color: #dfdfdf;text-align: center;margin-bottom: 20px;font-family: "Poppins", sans-serif;font-weight: 600;font-style: normal;}h3 {color: #dfdfdf;text-align: center;margin-bottom: 20px;font-family: "Poppins", sans-serif;font-weight: 600;font-style: normal;}p {color: #dfdfdf;text-align: center;margin-bottom: 20px;font-family: "Poppins", sans-serif;font-weight: 600;font-style: normal;}a {color: azure;text-align: center;font-family: "Poppins", sans-serif;font-weight: 600;font-style: normal;}</style></head><body><div class="header"><div class="logo"></div><a href="./login"><div class="home"> </div></a></div><div class="content"><div class="section"><h1> Sobre O Projeto</h1><img src="https://images2.imgbox.com/a7/27/5n9ZCUHb_o.jpg"><p> Proposta de Algoritmo para Otimização do Trânsito e Aumento da Segurança Viária através de Semaforização Inteligente e Detecção de Irregularidades</p><hr><h3> Resumo</h3><img src="https://images2.imgbox.com/6b/ef/2LXL1mGR_o.jpg"><p> Este trabalho apresenta uma proposta inovadora para lidar com o problema do tráfego urbano e aumentar a segurança nas vias por meio da implementação de um algoritmo avançado.</p><hr><h3>Metodologia</h3><img src="https://images2.imgbox.com/1c/7f/VRkuTbTe_o.jpg"><p> O algoritmo baseia-se na coleta de dados    em tempo real provenientes de cameras instaladas em diversas regiões da cidade.</p><hr><h3>Semaforização Inteligente</h3><img src="https://images2.imgbox.com/a1/24/d4E9PNHh_o.jpg"><p> O algoritmo proposto utiliza aprendizado de máquina para analisar padrões de tráfego e prever momentos de congestionamento.</p><hr><h3>Benefícios</h3><img src="https://images2.imgbox.com/d8/f1/zhWfTN7w_o.jpg"><p> Redução significativa de congestionamentos e melhorias na fluidez do tráfego; Aumento da segurança viária com a detecção precoce de situações de risco; Otimização do tempo de resposta dos serviços de emergência em casos de acidentes; Maior eficiência energética ao adaptar os tempos de semáforo conforme a demanda real.</p><hr><h3> Conclusão</h3><img src="https://images2.imgbox.com/7e/e3/c6m8lnjy_o.png"><p> A proposta deste algoritmo representa um avanço significativo na gestão do tráfego urbano e na segurança viária.</p></div><div class="section" style="text-align: left; background-color: #ffffff;"><h1 style="color: black;">Codigo</h1><h2> C++</h2><pre><font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><b><font color="#d35400">WiFi</font></b><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font><font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><b><font color="#d35400">WiFiClient</font></b><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font><font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><b><font color="#d35400">WebServer</font></b><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font>                <font color="#00979c">const</font> <font color="#00979c">char</font><font color="#434f54">*</font> <font color="#000000">ssid</font> &nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">=</font> <font color="#005c5f">&#34;4g_Chacara_Sao_Jose&#34;</font><font color="#000000">;</font><font color="#00979c">const</font> <font color="#00979c">char</font><font color="#434f54">*</font> <font color="#000000">password</font> <font color="#434f54">=</font> <font color="#005c5f">&#34;nthm1233&#34;</font><font color="#000000">;</font>   <font color="#00979c">const</font> <font color="#00979c">int</font> <font color="#000000">redLedPin</font> <font color="#434f54">=</font> <font color="#000000">4</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; Pino do LED vermelho</font><font color="#00979c">const</font> <font color="#00979c">int</font> <font color="#000000">yellowLedPin</font> <font color="#434f54">=</font> <font color="#000000">2</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; Pino do LED amarelo</font><font color="#00979c">const</font> <font color="#00979c">int</font> <font color="#000000">greenLedPin</font> <font color="#434f54">=</font> <font color="#000000">15</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47; Pino do LED verde</font><font color="#00979c">int</font> <font color="#000000">semaphoreState</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; 0: vermelho, 1: amarelo, 2: verde</font><font color="#00979c">unsigned</font> <font color="#00979c">long</font> <font color="#000000">previousMillis</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font><font color="#00979c">const</font> <font color="#00979c">long</font> <font color="#000000">redInterval</font> <font color="#434f54">=</font> <font color="#000000">2000</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; Tempo de espera no vermelho (em milissegundos)</font><font color="#00979c">const</font> <font color="#00979c">long</font> <font color="#000000">yellowInterval</font> <font color="#434f54">=</font> <font color="#000000">1000</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; Tempo de espera no amarelo (em milissegundos)</font><font color="#00979c">const</font> <font color="#00979c">long</font> <font color="#000000">greenInterval</font> <font color="#434f54">=</font> <font color="#000000">2000</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; Tempo de espera no verde (em milissegundos)</font><font color="#00979c">String</font> <font color="#000000">currentLine</font> <font color="#434f54">=</font> <font color="#005c5f">&#34;&#34;</font><font color="#000000">;</font> &nbsp;<b><font color="#d35400">WebServer</font></b> <font color="#000000">server</font><font color="#000000">(</font><font color="#000000">80</font><font color="#000000">)</font><font color="#000000">;</font><font color="#434f54">&#47;&#47;Check if header is present and correct</font><font color="#00979c">bool</font> <font color="#000000">is_authentified</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;Enter is_authentified&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">hasHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Cookie&#34;</font><font color="#000000">)</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;Found cookie: &#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#00979c">String</font> <font color="#000000">cookie</font> <font color="#434f54">=</font> <font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">header</font><font color="#000000">(</font><font color="#005c5f">&#34;Cookie&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#000000">cookie</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">cookie</font><font color="#434f54">.</font><font color="#d35400">indexOf</font><font color="#000000">(</font><font color="#005c5f">&#34;ESPSESSIONID=1&#34;</font><font color="#000000">)</font> <font color="#434f54">!=</font> <font color="#434f54">-</font><font color="#000000">1</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;Authentification Successful&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font> <font color="#00979c">true</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>&nbsp;<font color="#000000">}</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;Authentification Failed&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#5e6d03">return</font> <font color="#00979c">false</font><font color="#000000">;</font><font color="#000000">}</font><font color="#00979c">void</font> <font color="#000000">ligarSemaforo</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font><font color="#000000">}</font>&nbsp;<font color="#434f54">&#47;&#47;login page, also called for disconnect</font><font color="#00979c">void</font> <font color="#000000">handleLogin</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;<font color="#00979c">String</font> <font color="#000000">msg</font><font color="#000000">;</font>&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">hasHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Cookie&#34;</font><font color="#000000">)</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;Found cookie: &#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#00979c">String</font> <font color="#000000">cookie</font> <font color="#434f54">=</font> <font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">header</font><font color="#000000">(</font><font color="#005c5f">&#34;Cookie&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#000000">cookie</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">}</font>&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">hasArg</font><font color="#000000">(</font><font color="#005c5f">&#34;DISCONNECT&#34;</font><font color="#000000">)</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;Disconnection&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">sendHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Location&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;&#47;login&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">sendHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Cache-Control&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;no-cache&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">sendHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Set-Cookie&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;ESPSESSIONID=0&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">send</font><font color="#000000">(</font><font color="#000000">301</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font><font color="#000000">;</font>&nbsp;<font color="#000000">}</font>&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">hasArg</font><font color="#000000">(</font><font color="#005c5f">&#34;USERNAME&#34;</font><font color="#000000">)</font> <font color="#434f54">&amp;&amp;</font> <font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">hasArg</font><font color="#000000">(</font><font color="#005c5f">&#34;PASSWORD&#34;</font><font color="#000000">)</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">arg</font><font color="#000000">(</font><font color="#005c5f">&#34;USERNAME&#34;</font><font color="#000000">)</font> <font color="#434f54">==</font> <font color="#005c5f">&#34;David&#34;</font> <font color="#434f54">&amp;&amp;</font> &nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">arg</font><font color="#000000">(</font><font color="#005c5f">&#34;PASSWORD&#34;</font><font color="#000000">)</font> <font color="#434f54">==</font> <font color="#005c5f">&#34;david123&#34;</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">sendHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Location&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;&#47;&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">sendHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Cache-Control&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;no-cache&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">sendHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Set-Cookie&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;ESPSESSIONID=1&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">send</font><font color="#000000">(</font><font color="#000000">301</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;Log in Successful&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>&nbsp;&nbsp;&nbsp;<font color="#000000">msg</font> <font color="#434f54">=</font> <font color="#005c5f">&#34;Usuario ou Senha Invalidos!&#34;</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;Log in Failed&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">}</font>&nbsp;&nbsp;<font color="#000000">index_html</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font><font color="#000000">}</font>

<font color="#434f54">&#47;&#47;root page can be accessed only if authentification is ok</font><font color="#00979c">void</font> <font color="#000000">handleRoot</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;Enter handleRoot&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#00979c">String</font> <font color="#000000">header</font><font color="#000000">;</font>&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#434f54">!</font><font color="#000000">is_authentified</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">sendHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Location&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;&#47;login&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">sendHeader</font><font color="#000000">(</font><font color="#005c5f">&#34;Cache-Control&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;no-cache&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">send</font><font color="#000000">(</font><font color="#000000">301</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font><font color="#000000">;</font>&nbsp;<font color="#000000">}</font>&nbsp;<font color="#434f54">&#47;&#47;-- &nbsp;String content =&#34; &lt;html&gt;&lt;body&gt;&lt;H2&gt;Dashboard Semaforo Inteligente&lt;&#47;H2&gt;&lt;br&gt;&#34;</font><font color="#000000">painel_html</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">}</font><font color="#434f54">&#47;&#47;no need authentification</font><font color="#00979c">void</font> <font color="#000000">handleNotFound</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;<font color="#000000">page_not_found_html</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font><font color="#000000">}</font><font color="#00979c">void</font> <font color="#5e6d03">setup</font><font color="#000000">(</font><font color="#00979c">void</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">begin</font><font color="#000000">(</font><font color="#000000">115200</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<b><font color="#d35400">WiFi</font></b><font color="#434f54">.</font><font color="#d35400">mode</font><font color="#000000">(</font><font color="#00979c">WIFI_STA</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<b><font color="#d35400">WiFi</font></b><font color="#434f54">.</font><font color="#d35400">begin</font><font color="#000000">(</font><font color="#000000">ssid</font><font color="#434f54">,</font> <font color="#000000">password</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#434f54">&#47;&#47; Wait for connection</font>&nbsp;<font color="#5e6d03">while</font> <font color="#000000">(</font><b><font color="#d35400">WiFi</font></b><font color="#434f54">.</font><font color="#d35400">status</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#434f54">!=</font> <font color="#000000">WL_CONNECTED</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;<font color="#d35400">delay</font><font color="#000000">(</font><font color="#000000">500</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;.&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">}</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;Connected to &#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#000000">ssid</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;IP address: &#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><b><font color="#d35400">WiFi</font></b><font color="#434f54">.</font><font color="#d35400">localIP</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">on</font><font color="#000000">(</font><font color="#005c5f">&#34;&#47;&#34;</font><font color="#434f54">,</font> <font color="#000000">handleRoot</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">on</font><font color="#000000">(</font><font color="#005c5f">&#34;&#47;login&#34;</font><font color="#434f54">,</font> <font color="#000000">handleLogin</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">on</font><font color="#000000">(</font><font color="#005c5f">&#34;&#47;home&#34;</font><font color="#434f54">,</font> <font color="#000000">ligarSemaforo</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">on</font><font color="#000000">(</font><font color="#005c5f">&#34;&#47;inline&#34;</font><font color="#434f54">,</font> <font color="#000000">[</font><font color="#000000">]</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">send</font><font color="#000000">(</font><font color="#000000">200</font><font color="#434f54">,</font> <font color="#005c5f">&#34;text&#47;plain&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;this works without need of authentification&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">}</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">onNotFound</font><font color="#000000">(</font><font color="#000000">handleNotFound</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#434f54">&#47;&#47;here the list of headers to be recorded</font>&nbsp;<font color="#00979c">const</font> <font color="#00979c">char</font> <font color="#434f54">*</font> <font color="#000000">headerkeys</font><font color="#000000">[</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font><font color="#005c5f">&#34;User-Agent&#34;</font><font color="#434f54">,</font> <font color="#005c5f">&#34;Cookie&#34;</font><font color="#000000">}</font> <font color="#000000">;</font>&nbsp;<b><font color="#d35400">size_t</font></b> <font color="#000000">headerkeyssize</font> <font color="#434f54">=</font> <font color="#00979c">sizeof</font><font color="#000000">(</font><font color="#000000">headerkeys</font><font color="#000000">)</font> <font color="#434f54">&#47;</font> <font color="#00979c">sizeof</font><font color="#000000">(</font><font color="#00979c">char</font><font color="#434f54">*</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#434f54">&#47;&#47;ask server to track these headers</font>&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#000000">collectHeaders</font><font color="#000000">(</font><font color="#000000">headerkeys</font><font color="#434f54">,</font> <font color="#000000">headerkeyssize</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">begin</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#005c5f">&#34;HTTP server started&#34;</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;<b><font color="#d35400">Serial</font></b><font color="#434f54">.</font><font color="#d35400">begin</font><font color="#000000">(</font><font color="#000000">115200</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">pinMode</font><font color="#000000">(</font><font color="#000000">redLedPin</font><font color="#434f54">,</font> <font color="#00979c">OUTPUT</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#d35400">pinMode</font><font color="#000000">(</font><font color="#000000">yellowLedPin</font><font color="#434f54">,</font> <font color="#00979c">OUTPUT</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#d35400">pinMode</font><font color="#000000">(</font><font color="#000000">greenLedPin</font><font color="#434f54">,</font> <font color="#00979c">OUTPUT</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;<font color="#434f54">&#47;&#47; Desligar todos os LEDs inicialmente</font>&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">redLedPin</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">yellowLedPin</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">greenLedPin</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#d35400">delay</font><font color="#000000">(</font><font color="#000000">10</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#000000">}</font><font color="#00979c">void</font> <font color="#5e6d03">loop</font><font color="#000000">(</font><font color="#00979c">void</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;<font color="#000000">server</font><font color="#434f54">.</font><font color="#d35400">handleClient</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#d35400">delay</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">)</font><font color="#000000">;</font><font color="#434f54">&#47;&#47;allow the cpu to switch to other tasks</font><font color="#434f54">&#47;&#47;---</font><font color="#434f54">&#47;&#47; Verifica o estado atual do semáforo e liga o LED correspondente</font><font color="#00979c">unsigned</font> <font color="#00979c">long</font> <font color="#000000">currentMillis</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;<font color="#434f54">&#47;&#47; Verifica o estado atual do semáforo e liga o LED correspondente</font>&nbsp;<font color="#5e6d03">switch</font> <font color="#000000">(</font><font color="#000000">semaphoreState</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">0</font><font color="#434f54">:</font> <font color="#434f54">&#47;&#47; Vermelho</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">currentMillis</font> <font color="#434f54">-</font> <font color="#000000">previousMillis</font> <font color="#434f54">&gt;=</font> <font color="#000000">redInterval</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">previousMillis</font> <font color="#434f54">=</font> <font color="#000000">currentMillis</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">semaphoreState</font><font color="#434f54">++</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; Muda para amarelo</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">redLedPin</font><font color="#434f54">,</font> <font color="#00979c">HIGH</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">yellowLedPin</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">greenLedPin</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">1</font><font color="#434f54">:</font> <font color="#434f54">&#47;&#47; Amarelo</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">currentMillis</font> <font color="#434f54">-</font> <font color="#000000">previousMillis</font> <font color="#434f54">&gt;=</font> <font color="#000000">yellowInterval</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">previousMillis</font> <font color="#434f54">=</font> <font color="#000000">currentMillis</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">semaphoreState</font><font color="#434f54">++</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; Muda para verde</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">redLedPin</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">yellowLedPin</font><font color="#434f54">,</font> <font color="#00979c">HIGH</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">greenLedPin</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">2</font><font color="#434f54">:</font> <font color="#434f54">&#47;&#47; Verde</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">currentMillis</font> <font color="#434f54">-</font> <font color="#000000">previousMillis</font> <font color="#434f54">&gt;=</font> <font color="#000000">greenInterval</font><font color="#000000">)</font> <font color="#000000">{</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">previousMillis</font> <font color="#434f54">=</font> <font color="#000000">currentMillis</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">semaphoreState</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; Muda para vermelho</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">redLedPin</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">yellowLedPin</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">greenLedPin</font><font color="#434f54">,</font> <font color="#00979c">HIGH</font><font color="#000000">)</font><font color="#000000">;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>&nbsp;<font color="#000000">}</font><font color="#000000">}</font>

</pre><br><h2> Python</h2><pre><font color="#fd1a1a">import</font> <font color="#000000">cv2</font><font color="#fd1a1a">import</font> <font color="#000000">numpy</font> <font color="#000000">as</font> <font color="#000000">np</font><font color="#fd1a1a">import</font> <font color="#000000">urllib</font><font color="#434f54">.</font><font color="#000000">request</font><font color="#000000">url</font> <font color="#434f54">=</font> <font color="#000000">&#39;http:&#47;&#47;192.168.148.127&#47;cam-hi.jpg&#39;</font><font color="#000000">whT</font> <font color="#434f54">=</font> <font color="#000000">320</font><font color="#000000">confThreshold</font> <font color="#434f54">=</font> <font color="#000000">0.5</font><font color="#000000">nmsThreshold</font> <font color="#434f54">=</font> <font color="#000000">0.3</font><font color="#000000">arquivoClasses</font> <font color="#434f54">=</font> <font color="#000000">&#39;coco.names&#39;</font><font color="#000000">nomesClasses</font> <font color="#434f54">=</font> <font color="#000000">[</font><font color="#000000">]</font><font color="#000000">with</font> <font color="#000000">open</font><font color="#000000">(</font><font color="#000000">arquivoClasses</font><font color="#434f54">,</font> <font color="#000000">&#39;rt&#39;</font><font color="#000000">)</font> <font color="#000000">as</font> <font color="#000000">f</font><font color="#434f54">:</font>&nbsp;&nbsp;&nbsp;<font color="#000000">nomesClasses</font> <font color="#434f54">=</font> <font color="#000000">f</font><font color="#434f54">.</font><font color="#d35400">read</font><font color="#000000">(</font><font color="#000000">)</font><font color="#434f54">.</font><font color="#000000">rstrip</font><font color="#000000">(</font><font color="#00979c">&#39;\n&#39;</font><font color="#000000">)</font><font color="#434f54">.</font><font color="#000000">split</font><font color="#000000">(</font><font color="#00979c">&#39;\n&#39;</font><font color="#000000">)</font><font color="#000000">#</font> <font color="#000000">Classes</font> <font color="#000000">de</font> <font color="#000000">interesse</font><font color="#000000">classesAlvo</font> <font color="#434f54">=</font> <font color="#000000">[</font><font color="#000000">&#39;person&#39;</font><font color="#434f54">,</font> <font color="#000000">&#39;car&#39;</font><font color="#434f54">,</font> <font color="#000000">&#39;motorbike&#39;</font><font color="#434f54">,</font> <font color="#000000">&#39;truck&#39;</font><font color="#000000">]</font><font color="#000000">configModelo</font> <font color="#434f54">=</font> <font color="#000000">&#39;yolov3.cfg&#39;</font><font color="#000000">pesosModelo</font> <font color="#434f54">=</font> <font color="#000000">&#39;yolov3.weights&#39;</font><font color="#000000">net</font> <font color="#434f54">=</font> <font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">dnn</font><font color="#434f54">.</font><font color="#000000">readNetFromDarknet</font><font color="#000000">(</font><font color="#000000">configModelo</font><font color="#434f54">,</font> <font color="#000000">pesosModelo</font><font color="#000000">)</font><font color="#000000">net</font><font color="#434f54">.</font><font color="#000000">setPreferableBackend</font><font color="#000000">(</font><font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">dnn</font><font color="#434f54">.</font><font color="#000000">DNN_BACKEND_OPENCV</font><font color="#000000">)</font><font color="#000000">net</font><font color="#434f54">.</font><font color="#000000">setPreferableTarget</font><font color="#000000">(</font><font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">dnn</font><font color="#434f54">.</font><font color="#000000">DNN_TARGET_CPU</font><font color="#000000">)</font><font color="#fd1a1a">def</font> <font color="#00ff40">encontrarObjetos</font><font color="#000000">(</font><font color="#000000">saidas</font><font color="#434f54">,</font> <font color="#000000">imagem</font><font color="#000000">)</font><font color="#434f54">:</font>&nbsp;&nbsp;&nbsp;<font color="#000000">hT</font><font color="#434f54">,</font> <font color="#000000">wT</font><font color="#434f54">,</font> <font color="#000000">cT</font> <font color="#434f54">=</font> <font color="#000000">imagem</font><font color="#434f54">.</font><font color="#000000">shape</font>&nbsp;&nbsp;&nbsp;<font color="#000000">caixas</font> <font color="#434f54">=</font> <font color="#000000">[</font><font color="#000000">]</font>&nbsp;&nbsp;&nbsp;<font color="#000000">idsClasses</font> <font color="#434f54">=</font> <font color="#000000">[</font><font color="#000000">]</font>&nbsp;&nbsp;&nbsp;<font color="#000000">confiancas</font> <font color="#434f54">=</font> <font color="#000000">[</font><font color="#000000">]</font>&nbsp;&nbsp;&nbsp;<font color="#000000">contagemObjetos</font> <font color="#434f54">=</font> <font color="#000000">0</font>&nbsp;&nbsp;&nbsp;<font color="#fd1a1a">for</font> <font color="#000000">saida</font> <font color="#fd1a1a">in</font> <font color="#000000">saidas</font><font color="#434f54">:</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">for</font> <font color="#000000">det</font> <font color="#000000">in</font> <font color="#000000">saida</font><font color="#434f54">:</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">pontuacoes</font> <font color="#434f54">=</font> <font color="#000000">det</font><font color="#000000">[</font><font color="#000000">5</font><font color="#434f54">:</font><font color="#000000">]</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">idClasse</font> <font color="#434f54">=</font> <font color="#000000">np</font><font color="#434f54">.</font><font color="#000000">argmax</font><font color="#000000">(</font><font color="#000000">pontuacoes</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">confianca</font> <font color="#434f54">=</font> <font color="#000000">pontuacoes</font><font color="#000000">[</font><font color="#000000">idClasse</font><font color="#000000">]</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">confianca</font> <font color="#434f54">&gt;</font> <font color="#000000">confThreshold</font> <font color="#5e6d03">and</font> <font color="#000000">nomesClasses</font><font color="#000000">[</font><font color="#000000">idClasse</font><font color="#000000">]</font> <font color="#000000">in</font> <font color="#000000">classesAlvo</font><font color="#434f54">:</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">w</font><font color="#434f54">,</font> <font color="#000000">h</font> <font color="#434f54">=</font> <font color="#00979c">int</font><font color="#000000">(</font><font color="#000000">det</font><font color="#000000">[</font><font color="#000000">2</font><font color="#000000">]</font> <font color="#434f54">*</font> <font color="#000000">wT</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#00979c">int</font><font color="#000000">(</font><font color="#000000">det</font><font color="#000000">[</font><font color="#000000">3</font><font color="#000000">]</font> <font color="#434f54">*</font> <font color="#000000">hT</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">=</font> <font color="#00979c">int</font><font color="#000000">(</font><font color="#000000">(</font><font color="#000000">det</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">*</font> <font color="#000000">wT</font><font color="#000000">)</font> <font color="#434f54">-</font> <font color="#000000">w</font> <font color="#434f54">&#47;</font> <font color="#000000">2</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#00979c">int</font><font color="#000000">(</font><font color="#000000">(</font><font color="#000000">det</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font> <font color="#434f54">*</font> <font color="#000000">hT</font><font color="#000000">)</font> <font color="#434f54">-</font> <font color="#000000">h</font> <font color="#434f54">&#47;</font> <font color="#000000">2</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">caixas</font><font color="#434f54">.</font><font color="#000000">append</font><font color="#000000">(</font><font color="#000000">[</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">w</font><font color="#434f54">,</font> <font color="#000000">h</font><font color="#000000">]</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">idsClasses</font><font color="#434f54">.</font><font color="#000000">append</font><font color="#000000">(</font><font color="#000000">idClasse</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">confiancas</font><font color="#434f54">.</font><font color="#000000">append</font><font color="#000000">(</font><font color="#00979c">float</font><font color="#000000">(</font><font color="#000000">confianca</font><font color="#000000">)</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;<font color="#000000">indices</font> <font color="#434f54">=</font> <font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">dnn</font><font color="#434f54">.</font><font color="#000000">NMSBoxes</font><font color="#000000">(</font><font color="#000000">caixas</font><font color="#434f54">,</font> <font color="#000000">confiancas</font><font color="#434f54">,</font> <font color="#000000">confThreshold</font><font color="#434f54">,</font> <font color="#000000">nmsThreshold</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">len</font><font color="#000000">(</font><font color="#000000">indices</font><font color="#000000">)</font> <font color="#434f54">&gt;</font> <font color="#000000">0</font><font color="#434f54">:</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">for</font> <font color="#000000">i</font> <font color="#000000">in</font> <font color="#000000">indices</font><font color="#434f54">.</font><font color="#000000">flatten</font><font color="#000000">(</font><font color="#000000">)</font><font color="#434f54">:</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">caixa</font> <font color="#434f54">=</font> <font color="#000000">caixas</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">w</font><font color="#434f54">,</font> <font color="#000000">h</font> <font color="#434f54">=</font> <font color="#000000">caixa</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">caixa</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">caixa</font><font color="#000000">[</font><font color="#000000">2</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">caixa</font><font color="#000000">[</font><font color="#000000">3</font><font color="#000000">]</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">rotulo</font> <font color="#434f54">=</font> <font color="#000000">nomesClasses</font><font color="#000000">[</font><font color="#000000">idsClasses</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000">]</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">contagemObjetos</font> <font color="#434f54">+=</font> <font color="#000000">1</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">rectangle</font><font color="#000000">(</font><font color="#000000">imagem</font><font color="#434f54">,</font> <font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">(</font><font color="#000000">x</font> <font color="#434f54">+</font> <font color="#000000">w</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">+</font> <font color="#000000">h</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">(</font><font color="#000000">255</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">255</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">putText</font><font color="#000000">(</font><font color="#000000">imagem</font><font color="#434f54">,</font> <font color="#000000">f</font><font color="#000000">&#39;{rotulo.upper()} {int(confiancas[i] * 100)}%&#39;</font><font color="#434f54">,</font> <font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">-</font> <font color="#000000">10</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">FONT_HERSHEY_SIMPLEX</font><font color="#434f54">,</font> <font color="#000000">0.6</font><font color="#434f54">,</font> <font color="#000000">(</font><font color="#000000">255</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">255</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">putText</font><font color="#000000">(</font><font color="#000000">imagem</font><font color="#434f54">,</font> <font color="#000000">f</font><font color="#000000">&#39;Contagem de Objetos: {contagemObjetos}&#39;</font><font color="#434f54">,</font> <font color="#000000">(</font><font color="#000000">20</font><font color="#434f54">,</font> <font color="#000000">50</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">FONT_HERSHEY_SIMPLEX</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#434f54">,</font> <font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">255</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;<font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">f</font><font color="#000000">&#39;Número de objetos detectados: {contagemObjetos}&#39;</font><font color="#000000">)</font>font color="#000000">#</font> <font color="#000000">Capturar</font> <font color="#000000">uma</font> <font color="#000000">única</font> <font color="#000000">imagem</font> <font color="#000000">da</font> <font color="#000000">URL</font>font color="#000000">img_resp</font> <font color="#434f54">=</font> <font color="#000000">urllib</font><font color="#434f54">.</font><font color="#000000">request</font><font color="#434f54">.</font><font color="#000000">urlopen</font><font color="#000000">(</font><font color="#000000">url</font><font color="#000000">)</font>font color="#000000">img_np</font> <font color="#434f54">=</font> <font color="#000000">np</font><font color="#434f54">.</font><font color="#00979c">array</font><font color="#000000">(</font><font color="#000000">bytearray</font><font color="#000000">(</font><font color="#000000">img_resp</font><font color="#434f54">.</font><font color="#d35400">read</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">dtype</font><font color="#434f54">=</font><font color="#000000">np</font><font color="#434f54">.</font><font color="#000000">uint8</font><font color="#000000">)</font>font color="#000000">imagem</font> <font color="#434f54">=</font> <font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">imdecode</font><font color="#000000">(</font><font color="#000000">img_np</font><font color="#434f54">,</font> <font color="#434f54">-</font><font color="#000000">1</font><font color="#000000">)</font>font color="#5e6d03">if</font> <font color="#000000">imagem</font> <font color="#000000">is</font> <font color="#000000">None</font><font color="#434f54">:</font>&nbsp;&nbsp;&nbsp;<font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;Falha ao capturar imagem do URL.&#34;</font><font color="#000000">)</font>font color="#5e6d03">else</font><font color="#434f54">:</font>&nbsp;&nbsp;&nbsp;<font color="#000000">blob</font> <font color="#434f54">=</font> <font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">dnn</font><font color="#434f54">.</font><font color="#000000">blobFromImage</font><font color="#000000">(</font><font color="#000000">imagem</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#434f54">&#47;</font><font color="#000000">255</font><font color="#434f54">,</font> <font color="#000000">(</font><font color="#000000">whT</font><font color="#434f54">,</font> <font color="#000000">whT</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">[</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#434f54">,</font> <font color="#000000">crop</font><font color="#434f54">=</font><font color="#000000">False</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;<font color="#000000">net</font><font color="#434f54">.</font><font color="#000000">setInput</font><font color="#000000">(</font><font color="#000000">blob</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nomesCamadas</font> <font color="#434f54">=</font> <font color="#000000">net</font><font color="#434f54">.</font><font color="#000000">getLayerNames</font><font color="#000000">(</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;<font color="#000000">nomesSaidas</font> <font color="#434f54">=</font> <font color="#000000">[</font><font color="#000000">nomesCamadas</font><font color="#000000">[</font><font color="#000000">i</font> <font color="#434f54">-</font> <font color="#000000">1</font><font color="#000000">]</font> <font color="#5e6d03">for</font> <font color="#000000">i</font> <font color="#000000">in</font> <font color="#000000">net</font><font color="#434f54">.</font><font color="#000000">getUnconnectedOutLayers</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">]</font>&nbsp;&nbsp;&nbsp;<font color="#000000">saidas</font> <font color="#434f54">=</font> <font color="#000000">net</font><font color="#434f54">.</font><font color="#000000">forward</font><font color="#000000">(</font><font color="#000000">nomesSaidas</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;<font color="#000000">encontrarObjetos</font><font color="#000000">(</font><font color="#000000">saidas</font><font color="#434f54">,</font> <font color="#000000">imagem</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">imshow</font><font color="#000000">(</font><font color="#000000">&#39;Imagem&#39;</font><font color="#434f54">,</font> <font color="#000000">imagem</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;<font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">waitKey</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">)</font>&nbsp;&nbsp;&nbsp;<font color="#000000">cv2</font><font color="#434f54">.</font><font color="#000000">destroyAllWindows</font><font color="#000000">(</font><font color="#000000">)</font> </pre></div></div><div class="footer"><div class="profile"><a href="https://david-lino.vercel.app/" target="_blank">David Lino</a></div> <div class="profile"><a href="https://www.linkedin.com/in/matheus-floresti-ferrari-17572a287?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" target="_blank">MatheusFloresti</a></div><div class="profile"><a>Lucas Marques</a></div><div class="profile"><a>Gabriel Yoshihiko</a></div><div class="profile"><a>Rafael Rangel</a></div><div class="profile"><a>Guilherme Toyota</a></div></div></body></html>